# ASSO MVP - 프로젝트 현황

## 📊 현재 상태 (2026-02-15)

### 개발 완료 ✅
- Phase 1: 기본 PDF 업로드 및 AI 분석 (Gemini 2.5 Flash)
- Phase 2: Case 관리 시스템, 분석 히스토리
- Phase 3: 문서/분석 관리 기능 (삭제, 제목 수정)
- Phase 4: 분석 활용 기능
  - 분석 결과 메모/코멘트 (타임라인·증거 항목별 메모)
  - 분석 결과 비교 (2개 선택 후 나란히 비교)
  - 차이 강조 (시간순 기준 삭제됨/추가됨/수정됨, 요약 단어 diff)
  - AI 수정 시 **새 분석으로 저장** → 수정 전/후 비교 가능
- **증거기록 분류·분석**
  - PDF 업로드 후 "증거기록 분류" → 페이지별 텍스트 기반 AI 분류 → 증거 섹션 그룹핑
  - OCR 불가 페이지는 사용자 설명 입력
  - 증거별 개별 분석 (유형별 프롬프트)
- **증거 분류 후 Vision 추가 분석** (2026-02-15)
  - 사진 증거·OCR 불가 섹션에 **「Vision으로 설명 생성」** 버튼
  - 클라이언트에서 PDF 해당 페이지를 이미지로 렌더 → Gemini Vision으로 설명 생성 → `vision_description` 저장
  - 개별 증거 분석 시 원문 + Vision 설명 + 메모를 함께 AI에 전달
  - API: `POST /api/evidence-sections/[id]/describe-with-vision` (Body: `imageBase64`)
- **원문 키워드 검색 페이지 번호 정확도**
  - Upstage OCR `elements` 기반 페이지별 텍스트 사용 → PDF 실제 페이지(1,2,3...)로 통일
  - fallback: footer 태그 순서
- **통합 분석(선택한 문서 분석) 안정성**
  - AI 응답 JSON 파싱 보강 (앞뒤 설명문 제거 후 `{ ... }`만 추출)
  - 저장 실패 시에도 분석 결과는 클라이언트에 반환

### 비용
- 분석 1건당: ~₩2원 (Gemini Flash)
- 월 예상: 테스터 5명 × 10건 = ~₩100/월

### 주요 의사결정
1. **RAG/청킹 보류**: 복잡도 대비 효과 미미, 베타 후 재검토
2. **Soft Delete**: 사용자 데이터 = 자산, 실제 삭제 안 함
3. **Few-shot Learning**: Supabase RLS 설정 시 재활성화 가능 (`docs/SUPABASE_FEW_SHOT_SETUP.md` 참고)

### 베타 배포 준비도
- 기능: 95% 완성
- 안정성: 테스트 필요
- 다음: 사용자 테스트 → 피드백 수집
